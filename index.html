<!doctype html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>DanielaðŸ’œ</title>

    <style>
      body {
        margin: 0;
        padding: 0;
        background: #2e294e;
        overflow: hidden;
        font-family: "Georgia", serif;
      }

      canvas {
        position: absolute;
        top: 0;
        left: 0;
      }

      /* BOTÃ“N */
      .open-btn {
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        padding: 14px 32px;
        background: #b388eb;
        color: white;
        border: none;
        border-radius: 40px;
        font-size: 18px;
        cursor: pointer;
        opacity: 0;
        transition:
          opacity 1.5s ease,
          transform 0.3s;
        z-index: 10;
        box-shadow: 0 0 25px rgba(205, 180, 219, 0.5);
      }

      .open-btn.visible {
        opacity: 1;
      }

      .open-btn:hover {
        transform: translate(-50%, -50%) scale(1.1);
      }

      /* CARTA */
      .letter {
        position: fixed;
        top: 50%;
        left: 50%;
        width: 65%;
        max-width: 720px;
        padding: 70px;
        background: linear-gradient(145deg, #f3e8ff, #e9d5ff);
        border-radius: 35px;
        box-shadow: 0 0 80px rgba(205, 180, 219, 0.5);
        transform: translate(-50%, -50%) scale(0);
        transition: transform 0.8s ease;
        z-index: 20;
        text-align: center;
      }

      .letter.show {
        transform: translate(-50%, -50%) scale(1);
      }

      .letter h2 {
        font-size: 34px;
        color: #5e548e;
      }

      .letter p {
        font-size: 22px;
        line-height: 1.9;
        color: #5e548e;
      }

      .close {
        position: absolute;
        top: 18px;
        right: 28px;
        cursor: pointer;
        font-size: 22px;
        color: #5e548e;
      }
    </style>
  </head>

  <body>
    <canvas id="canvas"></canvas>
    <button class="open-btn" id="openBtn">Para Daniela <br> ðŸ’Œ Abrir</button>

    <div class="letter" id="letter">
      <div class="close" id="closeBtn">âœ–</div>
      <h2>ENTRE LO QUE SIENTO Y LO QUE VALORO DE TI ðŸ’œ</h2>
      <p>
        Solo querÃ­a decirte que valoro muchÃ­simo tu presencia en mi vida. Hay
        personas que llegan y simplemente estÃ¡nâ€¦ y hay otras que iluminan los
        dÃ­as sin darse cuenta. TÃº eres de esas.
      </p>
      <p>
        Admiro tu forma de ser, tu manera tan genuina de hablar, de reÃ­r, de
        escuchar. Contigo todo se siente mÃ¡s ligero y mÃ¡s bonito. Gracias por
        cada momento, por tu confianza y por ser alguien tan especial.
      </p>
      <p>Me alegra mucho poder compartir mi tiempo contigo.</p>
    </div>

    <script>
      const canvas = document.getElementById("canvas");
      const ctx = canvas.getContext("2d");
      canvas.width = window.innerWidth;
      canvas.height = window.innerHeight;

      let state = "rain";
      let heartPoints = [];
      let particles = [];
      let rainItems = [];
      let frameCount = 0;

      /* Generar corazÃ³n */
      function generateHeartPoints() {
        const centerX = canvas.width / 2;
        const centerY = canvas.height / 2;
        const scale = 8;

        for (let t = 0; t < Math.PI * 2; t += 0.1) {
          const x = 16 * Math.pow(Math.sin(t), 3);
          const y = -(
            13 * Math.cos(t) -
            5 * Math.cos(2 * t) -
            2 * Math.cos(3 * t) -
            Math.cos(4 * t)
          );
          heartPoints.push({
            x: centerX + x * scale,
            y: centerY + y * scale,
          });
        }
      }

      /* PartÃ­culas corazÃ³n */
      class HeartParticle {
        constructor(tx, ty) {
          this.x = Math.random() * canvas.width;
          this.y = Math.random() * canvas.height;
          this.tx = tx;
          this.ty = ty;
        }
        update() {
          this.x += (this.tx - this.x) * 0.02;
          this.y += (this.ty - this.y) * 0.02;
        }
        draw() {
          ctx.fillStyle = "#CDB4DB";
          ctx.beginPath();
          ctx.arc(this.x, this.y, 2, 0, Math.PI * 2);
          ctx.fill();
        }
      }

      /* Lluvia pÃ©talos y cartas */
      class RainItem {
        constructor() {
          this.x = Math.random() * canvas.width;
          this.y = -20;
          this.speed = Math.random() * 3 + 2;
          this.type = Math.random() > 0.5 ? "ðŸŒ¸" : "ðŸ’Œ";
          this.size = Math.random() * 20 + 15;
        }
        update() {
          this.y += this.speed;
        }
        draw() {
          ctx.font = this.size + "px Arial";
          ctx.fillStyle = this.type === "ðŸŒ¸" ? "#E0BBE4" : "#D8B4F8";
          ctx.fillText(this.type, this.x, this.y);
        }
      }

      generateHeartPoints();
      heartPoints.forEach((p) => {
        particles.push(new HeartParticle(p.x, p.y));
      });

      function animate() {
        ctx.fillStyle = "rgba(46,41,78,0.2)";
        ctx.fillRect(0, 0, canvas.width, canvas.height);

        frameCount++;

        if (state === "rain") {
          rainItems.push(new RainItem());
          rainItems.forEach((r) => {
            r.update();
            r.draw();
          });

          if (frameCount > 180) {
            state = "forming";
            rainItems = [];
          }
        }

        if (state === "forming") {
          particles.forEach((p) => {
            p.update();
            p.draw();
          });

          if (frameCount > 420) {
            state = "formed";
            document.getElementById("openBtn").classList.add("visible");
          }
        }

        if (state === "letter") {
          rainItems.push(new RainItem());
          rainItems.forEach((r) => {
            r.update();
            r.draw();
          });
        }

        requestAnimationFrame(animate);
      }

      animate();

      /* BotÃ³n */
      const openBtn = document.getElementById("openBtn");
      const letter = document.getElementById("letter");
      const closeBtn = document.getElementById("closeBtn");

      openBtn.addEventListener("click", () => {
        letter.classList.add("show");
        state = "letter";
      });

      closeBtn.addEventListener("click", () => {
        letter.classList.remove("show");
      });
    </script>
  </body>
</html>

